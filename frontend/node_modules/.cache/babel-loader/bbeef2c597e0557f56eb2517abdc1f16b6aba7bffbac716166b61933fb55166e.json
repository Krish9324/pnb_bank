{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Krish\\\\Downloads\\\\pnb_project_clean_mongo\\\\frontend\\\\src\\\\pages\\\\Transactions.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport API_BASE from '../api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Transactions({\n  user\n}) {\n  _s();\n  const [tx, setTx] = useState([]);\n  const [balance, setBalance] = useState(0);\n  const formatRs = value => {\n    const num = Number(value !== null && value !== void 0 ? value : 0);\n    return `Rs ${num.toLocaleString('en-IN')}`;\n  };\n  const load = async () => {\n    const r = await fetch(`${API_BASE}/api/transactions/` + user.id);\n    const d = await r.json();\n    setTx(d);\n    if (d.length > 0) setBalance(d[0].balance_after);\n  };\n  useEffect(() => {\n    if (user) load();\n  }, []);\n  const deposit = async () => {\n    const a = prompt('Amount?');\n    await fetch(`${API_BASE}/api/transactions/deposit`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        user_id: user.id,\n        amount: a\n      })\n    });\n    load();\n  };\n  const withdraw = async () => {\n    const a = prompt('Amount?');\n    const r = await fetch(`${API_BASE}/api/transactions/withdraw`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        user_id: user.id,\n        amount: a\n      })\n    });\n    const d = await r.json();\n    if (d.error) alert(d.error);\n    load();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Balance: \", formatRs(balance)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"action-buttons\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: deposit,\n        children: \"Deposit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: withdraw,\n        children: \"Withdraw\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: tx.map(t => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [t.type, \" - \", formatRs(t.amount)]\n      }, t.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 20\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 19,\n    columnNumber: 11\n  }, this);\n}\n_s(Transactions, \"2NW2lbCNPHBhfeh0HsBLSftYb/M=\");\n_c = Transactions;\nvar _c;\n$RefreshReg$(_c, \"Transactions\");","map":{"version":3,"names":["useEffect","useState","API_BASE","jsxDEV","_jsxDEV","Transactions","user","_s","tx","setTx","balance","setBalance","formatRs","value","num","Number","toLocaleString","load","r","fetch","id","d","json","length","balance_after","deposit","a","prompt","method","headers","body","JSON","stringify","user_id","amount","withdraw","error","alert","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","map","t","type","_c","$RefreshReg$"],"sources":["C:/Users/Krish/Downloads/pnb_project_clean_mongo/frontend/src/pages/Transactions.js"],"sourcesContent":["import {useEffect,useState} from 'react';\nimport API_BASE from '../api';\nexport default function Transactions({user}){\n  const [tx,setTx]=useState([]);\n  const [balance,setBalance]=useState(0);\n  const formatRs=value=>{\n    const num=Number(value??0);\n    return `Rs ${num.toLocaleString('en-IN')}`;\n  };\n  const load=async()=>{\n    const r=await fetch(`${API_BASE}/api/transactions/`+user.id);\n    const d=await r.json();\n    setTx(d);\n    if(d.length>0) setBalance(d[0].balance_after);\n  };\n  useEffect(()=>{ if(user) load(); },[]);\n  const deposit=async()=>{ const a=prompt('Amount?'); await fetch(`${API_BASE}/api/transactions/deposit`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id:user.id,amount:a})}); load(); };\n  const withdraw=async()=>{ const a=prompt('Amount?'); const r=await fetch(`${API_BASE}/api/transactions/withdraw`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id:user.id,amount:a})}); const d=await r.json(); if(d.error) alert(d.error); load(); };\n  return (<div>\n    <h3>Balance: {formatRs(balance)}</h3>\n    <div className=\"action-buttons\">\n      <button onClick={deposit}>Deposit</button>\n      <button onClick={withdraw}>Withdraw</button>\n    </div>\n    <ul>{tx.map(t=><li key={t.id}>{t.type} - {formatRs(t.amount)}</li>)}</ul>\n  </div>);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}